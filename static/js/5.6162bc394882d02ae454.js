webpackJsonp([5],{"2get":function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=s("Xxa5"),i=s.n(a),c=s("exGp"),n=s.n(c),o={components:{loading:function(t){s.e(11).then(function(){var e=[s("KgXo")];t.apply(null,e)}.bind(this)).catch(s.oe)},message:function(t){s.e(12).then(function(){var e=[s("AVWw")];t.apply(null,e)}.bind(this)).catch(s.oe)}},data:function(){return{wxUrl:globalConfig.wxUrl,loading:!1,messageStatus:!1,messageText:"",account_name:"",publicKey:"",privateKey:"",redStr:"",redObj:null,errorType:0}},created:function(){this.$route.query.id&&(this.id=this.$route.query.id,this.f=this.$route.query.f,this.l=this.$route.query.l,this.redStr=this.$t("YAS Mainnet Red Envelope")+"\n - - - - - - - - - - - - -\n恭喜发财，大吉大利\n- - - - - - - - - - - - -\n"+this.$t("RedInfo1")+this.wxUrl+"/receive?id="+this.id+"&f="+this.f+"&l="+this.l+"&lang="+localStorage.getItem("Lang")+"\n"+this.$t("RedInfo2")+"\n"+this.$t("RedInfo3"))},methods:{checkAccount:function(){var t=this;12==this.account_name.length&&/^([a-z1-5]){12}$/.test(this.account_name)?(this.errorType=3,this.chainApi.checkAccountExist(this.account_name).then(function(e){e?(t.$message.error("账号已存在"),t.errorType=1):t.errorType=2})):this.errorType=1},doCopyAccount:function(){var t=this;t.$copyText(t.account_name).then(function(e){t.$message.success("复制成功")},function(e){t.$message.error("复制失败")})},doCopyKey:function(){var t=this;t.$copyText(t.privateKey).then(function(e){t.$message.success("复制成功")},function(e){t.$message.error("复制失败")})},goBack:function(){window.history.go(-1)},newAccount:function(){""==this.account_name?this.$message.error(this.$t("AccountNull")):/^([a-z1-5]){12}$/.test(this.account_name)?""==this.publicKey?this.$message.error(this.$t("PublicKeyNull")):""==this.redStr?this.$message.error(this.$t("RedStrNull")):this.sendTransaction():this.$message.error(this.$t("AccountError"))},sendTransaction:function(){var t=this;return n()(i.a.mark(function e(){var s,a,c,n,o,r,l;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return s=t.redStr.split("=")[1].split("&")[0],a=t.redStr.split("=")[2].split("&")[0],c=t.redStr.split("=")[3].split("&")[0],console.log("===",s,a,c),e.prev=4,e.next=7,t.chainApi.getRecord(s);case 7:t.redObj=e.sent,0==t.redObj.rest_number&&t.$message.error("红包已领完"),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(4),t.$message.error("红包不存在");case 14:return n=t.redObj.create_time,o=t.account_name,r=t.chainApi.sign(s,o,n,a,c),t.loading=!0,e.prev=18,e.next=21,t.chainApi.newAccount(s,o,r,t.publicKey);case 21:l=e.sent,t.loading=!1,console.log(l),t.$message.success("交易成功"),e.next=32;break;case 27:e.prev=27,e.t1=e.catch(18),t.loading=!1,console.log(e.t1),t.$message.error("交易失败");case 32:case"end":return e.stop()}},e,t,[[4,11],[18,27]])}))()},generateKeyPair:function(){var t=this;return n()(i.a.mark(function e(){var s;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.loading=!0,e.next=3,t.chainApi.generateKeyPair();case 3:s=e.sent,t.loading=!1,t.privateKey=s.privateKey,t.publicKey=s.publicKey;case 7:case"end":return e.stop()}},e,t)}))()},randomName:function(){for(var t=["1","2","3","4","5","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],e="",s=0;s<12;s++){e+=t[Math.floor(31*Math.random())]}console.log(e),this.account_name=e,this.checkAccount()}},computed:{}},r={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"account_box"},[s("div",{staticClass:"account_nav"},[s("div",{staticClass:"account_nav_btn",on:{click:t.goBack}},[s("i",{staticClass:"el-icon-back"})]),t._v(" "),s("div",{staticClass:"account_nav_title"},[t._v(t._s(t.$t("Create YAS Account")))]),t._v(" "),s("div",{staticClass:"account_nav_text"},[s("router-link",{attrs:{to:"/"}},[s("i",{staticClass:"el-icon-s-home"})])],1)]),t._v(" "),s("div",{staticClass:"account_content"},[s("div",{staticClass:"account_item"},[s("div",{staticClass:"account_item_top"},[s("div",[t._v(t._s(t.$t("Account")))]),t._v(" "),s("div",[s("span",{staticClass:"blue",staticStyle:{"margin-right":"8px"},on:{click:t.randomName}},[t._v(t._s(t.$t("Feeling Lucky")))]),t._v(" "),s("span",{staticClass:"blue",on:{click:t.doCopyAccount}},[t._v(t._s(t.$t("COPY")))])])]),t._v(" "),s("div",{staticClass:"account_item_middle input_error_box"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.account_name,expression:"account_name"}],attrs:{type:"text",placeholder:t.$t("Please input your account")},domProps:{value:t.account_name},on:{input:[function(e){e.target.composing||(t.account_name=e.target.value)},t.checkAccount]}}),t._v(" "),1==t.errorType?s("div",{staticClass:"error_icon",staticStyle:{color:"red"}},[s("i",{staticClass:"el-icon-error"})]):t._e(),t._v(" "),2==t.errorType?s("div",{staticClass:"error_icon",staticStyle:{color:"green"}},[s("i",{staticClass:"el-icon-success"})]):t._e(),t._v(" "),3==t.errorType?s("div",{staticClass:"error_icon"},[s("i",{staticClass:"el-icon-loading"})]):t._e()]),t._v(" "),s("div",{staticClass:"account_item_foot"},[t._v(t._s(t.$t("AccountText")))])]),t._v(" "),s("div",{staticClass:"account_item"},[s("div",{staticClass:"account_item_top"},[s("div",[t._v(t._s(t.$t("PublicKey")))]),t._v(" "),s("div",{staticClass:"blue",on:{click:t.generateKeyPair}},[t._v(t._s(t.$t("Create New PublicKey")))])]),t._v(" "),s("div",{staticClass:"account_item_middle"},[s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.publicKey,expression:"publicKey"}],staticClass:"textarea_key bk_f1fdf5",attrs:{placeholder:t.$t("Please enter the public key")},domProps:{value:t.publicKey},on:{input:function(e){e.target.composing||(t.publicKey=e.target.value)}}})]),t._v(" "),s("div",{staticClass:"account_item_foot"},[t._v(t._s(t.$t("PublicKeyMessage")))])]),t._v(" "),s("div",{staticClass:"account_item"},[s("div",{staticClass:"account_item_top"},[s("div",[t._v(t._s(t.$t("PrivateKey")))]),t._v(" "),""!=t.privateKey?s("div",{staticClass:"blue",on:{click:t.doCopyKey}},[t._v(t._s(t.$t("COPY")))]):t._e()]),t._v(" "),s("div",{staticClass:"account_item_middle"},[s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.privateKey,expression:"privateKey"}],staticClass:"textarea_key bk_fbf2f2",domProps:{value:t.privateKey},on:{input:function(e){e.target.composing||(t.privateKey=e.target.value)}}})]),t._v(" "),s("div",{staticClass:"account_item_foot red"},[t._v(t._s(t.$t("Do not tell anyone")))])]),t._v(" "),s("div",{staticClass:"account_item"},[s("div",{staticClass:"account_item_top"},[s("div",[t._v(t._s(t.$t("Red Envelope Code")))])]),t._v(" "),s("div",{staticClass:"account_item_middle"},[s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.redStr,expression:"redStr"}],staticClass:"textarea_redp bk_fffcdd",domProps:{value:t.redStr},on:{input:function(e){e.target.composing||(t.redStr=e.target.value)}}})])]),t._v(" "),s("div",{staticClass:"account_text"},[s("p",{staticClass:"account_text_title red"},[t._v(t._s(t.$t("Save offline")))]),t._v(" "),s("p",[t._v(t._s(t.$t("Save offline Content")))])]),t._v(" "),s("div",{staticClass:"account_text"},[s("p",{staticClass:"account_text_title red"},[t._v(t._s(t.$t("Please do not use network transmission")))]),t._v(" "),s("p",[t._v(t._s(t.$t("Please do not use network transmission Content")))])]),t._v(" "),s("div",{staticClass:"account_text"},[s("p",{staticClass:"account_text_title"},[t._v(t._s(t.$t("Tips")))]),t._v(" "),s("p",[t._v(t._s(t.$t("Tips Content")))])]),t._v(" "),s("div",{staticClass:"account_text"},[s("p",{staticClass:"account_text_title"},[t._v(t._s(t.$t("Usage")))]),t._v(" "),s("p",[t._v(t._s(t.$t("Usage Content")))])]),t._v(" "),s("div",{staticClass:"account_item"},[s("button",{on:{click:t.newAccount}},[t._v(t._s(t.$t("Create Account")))])])]),t._v(" "),s("loading",{attrs:{"loading-status":t.loading}}),t._v(" "),s("message",{attrs:{"message-status":t.messageStatus,"message-text":t.messageText}})],1)},staticRenderFns:[]};var l=s("VU/8")(o,r,!1,function(t){s("PYv8")},"data-v-49077632",null);e.default=l.exports},PYv8:function(t,e){}});
//# sourceMappingURL=5.6162bc394882d02ae454.js.map
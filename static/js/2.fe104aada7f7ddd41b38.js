webpackJsonp([2],{"5YGR":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n("Xxa5"),o=n.n(a),c=n("exGp"),i=n.n(c),r={components:{loading:function(e){n.e(11).then(function(){var t=[n("KgXo")];e.apply(null,t)}.bind(this)).catch(n.oe)},redTop:function(e){n.e(14).then(function(){var t=[n("o78M")];e.apply(null,t)}.bind(this)).catch(n.oe)},redData:function(e){n.e(13).then(function(){var t=[n("qN0l")];e.apply(null,t)}.bind(this)).catch(n.oe)},slider:function(e){n.e(17).then(function(){var t=[n("7d4M")];e.apply(null,t)}.bind(this)).catch(n.oe)}},data:function(){return{loading:!1,redObj:null,accountName:null,isShow:!0}},beforeRouteEnter:function(e,t,n){n(function(e){null==t.name?e.isShow=!1:e.isShow=!0})},created:function(){var e=this;return i()(o.a.mark(function t(){var n;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return"zh"==e.$route.query.lang?(localStorage.setItem("Lang","zh"),e.$i18n.locale="zh"):"en"==e.$route.query.lang&&(localStorage.setItem("Lang","en"),e.$i18n.locale="en"),n=e.$route.query.id,console.log(n),t.prev=3,t.next=6,e.chainApi.getRecord(n);case 6:return e.redObj=t.sent,console.log(e.accountName),0==e.redObj.rest_number&&e.$message.error(e.$t("RedOverMessage")),t.next=11,e.chainApi.connectIdentity();case 11:e.accountName=t.sent.name,console.log(e.accountName),t.next=18;break;case 15:t.prev=15,t.t0=t.catch(3),e.$message.error(e.$t(t.t0));case 18:case"end":return t.stop()}},t,e,[[3,15]])}))()},methods:{goBack:function(){window.history.go(-1)},goAccount:function(){this.$router.push({path:"account?id="+this.$route.query.id+"&f="+this.$route.query.f+"&l="+this.$route.query.l})},getEnvelope:function(){var e=this,t=this.accountName;if(""==t||null==t)this.$message.error(this.$t("AccountNull"));else{var n=this.redObj.envelope_id;if(localStorage[n])this.$message.error(this.$t("AlreadyTaken"));else{this.loading=!0;var a=this.redObj.create_time,o=this.$route.query.f,c=this.$route.query.l,i=this.chainApi.sign(n,t,a,o,c);this.chainApi.getEnvelope(n,t,i).then(function(t){console.log(t),e.$message.success(e.$t("TranSuccess")),e.loading=!1,localStorage[n]=!0;var a=e;setTimeout(function(){a.chainApi.getRecord(a.$route.query.id).then(function(e){a.redObj=e})},1e3)}).catch(function(t){console.log(t),e.$message.error(e.$t("TranFail")),e.loading=!1,e.chainApi.getRecord(n).then(function(t){e.redObj=t,0==e.redObj.rest_number&&e.$message.error(e.$t("RedOverMessage"))})})}}}}},s={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"receive_box"},[n("div",{staticClass:"receive_nav"},[n("div",{staticClass:"receive_nav_btn",on:{click:e.goBack}},[e.isShow?n("i",{staticClass:"el-icon-back"}):e._e()]),e._v(" "),n("div",{staticClass:"receive_nav_title"},[e._v(e._s(e.$t("Red Packet")))]),e._v(" "),n("div",{staticClass:"receive_nav_text"},[n("router-link",{attrs:{to:"/"}},[n("i",{staticClass:"el-icon-s-home"})])],1)]),e._v(" "),n("red-top",{attrs:{"red-obj":e.redObj}}),e._v(" "),n("red-data",{attrs:{"red-obj":e.redObj}}),e._v(" "),n("div",{staticClass:"receive_input"},[n("div",{staticClass:"account_input"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.accountName,expression:"accountName"}],attrs:{type:"text"},domProps:{value:e.accountName},on:{input:function(t){t.target.composing||(e.accountName=t.target.value)}}})]),e._v(" "),n("div",{staticClass:"input_text"},[n("span",[e._v(e._s(e.$t("NoAccount")))]),e._v(" "),n("span",{staticStyle:{color:"#fff7c1"},on:{click:e.goAccount}},[e._v(e._s(e.$t("Create Account")))])]),e._v(" "),n("slider",{on:{validUser:e.getEnvelope}})],1),e._v(" "),n("loading",{attrs:{"loading-status":e.loading}})],1)},staticRenderFns:[]};var u=n("VU/8")(r,s,!1,function(e){n("jWP8")},"data-v-98bc2f12",null);t.default=u.exports},jWP8:function(e,t){}});
//# sourceMappingURL=2.fe104aada7f7ddd41b38.js.map